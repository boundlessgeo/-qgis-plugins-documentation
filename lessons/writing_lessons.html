<!--
 (c) 2016 Boundless, http://boundlessgeo.com
 This work is licensed under CC-BY-SA 3.0 US License. 
-->
<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  
  <title>Boundless : QGIS Lessons Plugin : Writing Lessons</title>

  <link rel="profile" href="http://gmpg.org/xfn/11">
  <link rel="stylesheet" href="_static/opengeo.css" type="text/css"/>
  <link rel="stylesheet" href="_static/extra.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="top" title="QGIS Lessons Plugin 1.0 documentation" href="index.html" />
      <link rel="prev" title="Usage" href="usage.html" />
<style>
  @font-face { font-family: cantarell; src: url('_static/Cantarell-Oblique.ttf'); font-weight:oblique; }
  @font-face { font-family: cantarell; src: url('_static/Cantarell-Bold.ttf'); font-weight:bold; }
  @font-face { font-family: cantarell; src: url('_static/Cantarell-Regular.ttf'); }
  @font-face { font-family: proxima-nova-light; src: url('_static/ProximaNova-Light.ttf'); }
  @font-face { font-family: proxima-nova-semibold; src: url('_static/ProximaNova-SBold.ttf'); }
  @font-face { font-family: Source Code Pro; src: url('_static/SourceCodePro-Regular.ttf'); }
</style>

<link rel="stylesheet" id="style-css" href="_static/style.css" type="text/css" media="all">

</head>
<body class="page">

	<div id="wrapper">
				<header id="masthead" class="site-header" role="banner">
			<div class="container">
				<a href="/" rel="home" id="logo"><img src="_static/logo.png"></a>
				<div class="pull-right">
					<div class="pull-left">
						<div class="menu-main-container">
						</div>
					</div>
					<!--
					<div class="search dropdown">
					  <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="search-icon"></i></a>
						  <div class="dropdown-menu" role="menu" aria-labelledby="dLabel">
						        <form class="search" action="search.html" method="get">
						          <label for="q" class="screen-reader-text">Search</label>
						          <input type="text" class="field" name="q" placeholder="Search …" />
						          <input type="submit" class="submit" value="Go" />
						          <input type="hidden" name="check_keywords" value="yes" />
						          <input type="hidden" name="area" value="default" />
						        </form>
						  </div>
					</div>-->
				</div>
			</div><!--closes container-->

		</header><div id="pageheading"><div class="contents"><h1>QGIS Lessons Plugin</h1></div></div>

  <div id="content" class="contents">
<div id="breadcrumbs">
  <a href="http://boundlessgeo.com/">Home</a> &raquo;
  <a href="http://boundlessgeo.com/resources/">Resources</a> &raquo;
  <a href="index.html">QGIS Lessons Plugin</a>
  
     &raquo; <a href="">Writing Lessons</a>
</div>

  <div id="rightbar_main">
      
  <div class="section" id="id1">
<h1>Writing Lessons<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Instructions to write new lessons are described in this document.</p>
<p>The recommended procedure for adding new lessons is as follows:</p>
<ol class="arabic simple">
<li>First, create a new plugin. This plugin will be responsible for registering the lessons, so they will appear when the lessons list is shown.</li>
<li>For each lesson, create a separate folder with the structure shown below:</li>
</ol>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">`__init__.py`</span></code></li>
<li>[html files describing the lesson and each step in it]</li>
<li>[data used for this lesson]</li>
<li><code class="docutils literal"><span class="pre">`project.qgs`</span></code></li>
</ul>
<p>All these elements are explained in a later section in this document.</p>
<ol class="arabic simple" start="3">
<li>In the init method of your plugin, register your plugin adding the following snippet</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">lessons</span> <span class="kn">import</span> <span class="n">addLessonModule</span>
    <span class="n">addLessonModule</span><span class="p">(</span><span class="n">lesson_module</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Replace <em>lesson_module</em> with the reference to your lesson module (which you should have imported), and add as many entries as modules you have created in your set of lessons.</p>
<p>If you plugin contains several lesson, there is no need to call the <code class="docutils literal"><span class="pre">`addLessonModule`</span></code> method repeatedly. You can use the <code class="docutils literal"><span class="pre">`addLessonsFolder`</span></code> method and pass the path to the folder that contains the lesson subfolders</p>
<p>In the <code class="docutils literal"><span class="pre">`unload`</span></code> method of your plugin, you should remove the lessons using the <code class="docutils literal"><span class="pre">`removeLessonModule`</span></code> or <code class="docutils literal"><span class="pre">`removeLessonsFolder`</span></code> methods :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">lessons</span> <span class="kn">import</span> <span class="n">removeLessonsFolder</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">return</span>

<span class="n">removeLessonsFolder</span><span class="p">(</span><span class="n">lesson_folder</span><span class="p">)</span>
</pre></div>
</div>
<p>An example of a plugin that adds a collection of lessons can be found in the <code class="docutils literal"><span class="pre">`examplelessons`</span></code> folder of this repository. Use is as a template for you own collections. If using it, you do not have to manually call the <code class="docutils literal"><span class="pre">`addLessonModule`</span></code> method. The plugin will automatically discover all available lessons. The only thing you have to do is to add your lessons under the <code class="docutils literal"><span class="pre">`_lessons`</span></code> subfolder, each of them in its corresponding subfolder, as described above.</p>
<div class="section" id="creating-a-lesson">
<h2>Creating a lesson<a class="headerlink" href="#creating-a-lesson" title="Permalink to this headline">¶</a></h2>
<p>If you have created a folder for each lesson as described above, the steps of the lesson and the content of each step should be defined in the <code class="docutils literal"><span class="pre">`__init__.py`</span></code> file.</p>
<p>Create a <code class="docutils literal"><span class="pre">`Lesson`</span></code> object, specifying its name, the group it belongs to (lessons can be grouped) and a detailed description.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lesson</span> <span class="o">=</span> <span class="n">Lesson</span> <span class="p">(</span><span class="s2">&quot;Interpolating from a points layer&quot;</span><span class="p">,</span> <span class="s2">&quot;Analysis lessons&quot;</span><span class="p">,</span>
                <span class="s2">&quot;This lessons shows how to use the interpolation capabilities of QGIS&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Instead of a string with the description, you can pass the name of an HTML file containing a richer description. For instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lesson</span> <span class="o">=</span> <span class="n">Lesson</span> <span class="p">(</span><span class="s2">&quot;Interpolating from a points layer&quot;</span><span class="p">,</span> <span class="s2">&quot;Analysis lessons&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lesson.html&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>There is no need to add the full path to the file, as long as the file is in the same folder as the <code class="docutils literal"><span class="pre">`__init__.py`</span></code> file. The full path will be correctly resolved at runtime.</p>
<p>If your lesson requires loading data into QGIS, you can prepare a project with that data. Name the project <a href="#id2"><span class="problematic" id="id3">``</span></a>project.qgs```and put it in the lesson folder as well, as indicated. This will cause the lesson to automatically have a first step that loads the data before starting with the rest of step. If you want your data to be loaded from a different project in another folder, or to load it not at the beginning of the lesson, you will have to manually add that step.</p>
<p>Now you can add steps to your lesson using the <code class="docutils literal"><span class="pre">`addStep`</span></code> method, which has the following signature:</p>
<div class="highlight-python"><div class="highlight"><pre>addStep(self, name, description, function=None, prestep=None, endsignal=None,
            endsignalcheck=None, endcheck=lambda:True, steptype=1):
</pre></div>
</div>
<p>Here is a description of its arguments:</p>
<ul class="simple">
<li><strong>name</strong>: the name of the step, to be shown in the lesson explorer when running the lesson.</li>
<li><strong>description</strong>: a longer description of the step. As in the case of the leson description, it can be a string containing the description, or a string containing the name of an HTML file with the description itself.</li>
<li><strong>function</strong>: The function that execute this step. Even in the case of steps that are supposed to be performed manually by the user, a function can be supplied which performs the same action. In this case, the <em>Run step</em> button will be available, so the user can have the step automatically executed, instead of having to do it manually. If the step is a manual step and there is no function to perform the task, None can be passed</li>
<li><strong>prestep</strong>: a function to be executed before starting the step, for preparing the necessary context. Should be None if no preparation is needed</li>
<li><strong>endsignal</strong>: a signal that indicates that the step has been finished. If not None, the plugin will listen to the passed signal, and when it is emitted, it will automatically move to the next step.</li>
<li><strong>endsignalcheck</strong>: In case it is needed to check that the <em>endsignal</em> signal should actually cause moving to the next step, pass a function to do the checking using this parameters. Should be used if the signal might be emmited in cases that do not represent the end of the step. Should be None if no check has to be performed.</li>
<li><strong>endcheck</strong>: a function to check that the step has been correctly executed. This function will be run when the lesson moves to the next step. If should return true if the user has correctly performed the task for this step, or false otherwise. In this last case, the plugin will show a warning message and won&#8217;t let the user move to the next step until the step is correctly completed.</li>
<li><strong>steptype</strong>: <code class="docutils literal"><span class="pre">`Step.MANUALSTEP`</span></code> if the step is to be performed manually by the user, or <code class="docutils literal"><span class="pre">`Step.AUTOMATEDSTEP`</span></code> if it&#8217;s an automated one. In this last case, the step will not be shown in the list of them in the lesson explorer, and it is required to pass a function using the <code class="docutils literal"><span class="pre">`function`</span></code> argument.</li>
</ul>
<p>Additionaly, you can add a cleanup method, that will be run when the lesson is finished or the user exits the lesson before finishing it.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lesson</span><span class="o">.</span><span class="n">addCleanup</span><span class="p">(</span><span class="n">cleanupMethod</span><span class="p">)</span>
</pre></div>
</div>
<p>If your lesson is related to other lessons, you can add them as recommended lesson to continue after the current one is finished.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lesson</span><span class="o">.</span><span class="n">addNextLesson</span><span class="p">(</span><span class="s2">&quot;Lessons Group&quot;</span><span class="p">,</span> <span class="s2">&quot;Name of the lesson&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Name and group name must match the name and group name of the lesson that you want to add, which ideally should be in the same plugin, to ensure that it is installed as well when the current lesson is avaliable.</p>
</div>
<div class="section" id="convenience-methods-and-utils">
<h2>Convenience methods and utils<a class="headerlink" href="#convenience-methods-and-utils" title="Permalink to this headline">¶</a></h2>
<p>To make it easier to create new lessons, you will find some convenience methods in the <code class="docutils literal"><span class="pre">`Lesson`</span></code> class and functions for performing common tasks in the <code class="docutils literal"><span class="pre">`lessons.utils`</span></code> module.</p>
<p>The <code class="docutils literal"><span class="pre">`addMenuClickStep()`</span></code> method in the <a href="#id4"><span class="problematic" id="id5">``</span></a><a href="#id6"><span class="problematic" id="id7">`</span></a>Lesson```class will add step that involves clicking on a menu item. Its only argument is the name of the menu to click. This method will add a step that unfolds the specified menu and highlights the corresponding menu item, and that will automatically move to the next step once that menu item is clicked.</p>
</div>
<div class="section" id="creating-simple-lessons-with-yaml-files">
<h2>Creating simple lessons with YAML files<a class="headerlink" href="#creating-simple-lessons-with-yaml-files" title="Permalink to this headline">¶</a></h2>
<p>Lesson can also be creted using YAMLS files, allowing those with no Python experience to create their own lessons. Instead of a <code class="docutils literal"><span class="pre">`___init___.py`</span></code> file, you need a <code class="docutils literal"><span class="pre">`lesson.yaml`</span></code> file. The file structure of the folder  that contains the lesson should be like this:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">`lesson.yaml`</span></code></li>
<li>[html files describing the lesson and each step in it]</li>
<li>[data used for this lesson]</li>
<li><code class="docutils literal"><span class="pre">`project.qgs`</span></code></li>
</ul>
<p>Lessons created this way cannot content automated routines, such as presteps or methods to check if the step was correctly performed before moving to the next one. Instead, they are just a collection of steps, each of them with an associated description.</p>
<p>The plugin in the <code class="docutils literal"><span class="pre">`examplelessons`</span></code> folder also contains a lesson based on a YAML file. It is actually the same lesson that is included as a Python example, although it doesn&#8217;t contain some of the elements in that one, such as automatically running some steps, since those are not available in this case, as explained above.</p>
<p>Here&#8217;s the lesson YAML file, with comments to explain its content:</p>
<div class="highlight-python"><div class="highlight"><pre>name: Export to geojson (yaml example) #The name of the lesson
group: Basic lessons #The group the lesson belongs to
description: lesson.html #the filename of the description page, which has to be in this same folder.
                            # You can also put the html code here directly
steps: #a list of steps in the lesson, in the correct order in which they have to be performed
    - name: Set &#39;points&#39; layer as active layer
      description: activelayer.html #the filename of the description page for this step
                                    #Text or html code can be entered here as well, instead of a filepath

    - menu: Layer/Save As... # this will add a step that prompts the user to click on the specified menu

    - name: Save the file as geojson
      description: saveas.html
</pre></div>
</div>
</div>
<div class="section" id="capturing-qgis-interaction-to-create-a-lesson">
<h2>Capturing QGIS interaction to create a lesson<a class="headerlink" href="#capturing-qgis-interaction-to-create-a-lesson" title="Permalink to this headline">¶</a></h2>
<p>The help files associated with a lesson contain text and usually screenshots. These have to be created manually, by creating the corresponding html and image files.</p>
<p>An additional plugin is included in this repository, in the <code class="docutils literal"><span class="pre">`lessonscreator`</span></code> folder, aimed at users that plan to create their own lessons. It simplifies both writing text and creating screenshots, by capturing actions performed in QGIS. That is, the user performs the steps in the lesson to create, and the plugin tries to automatically create the corresponding lesson files.</p>
<p>To create a new lesson, select the <em>Plugins/Lessons/Capture lesson steps</em> menu. Select a folder to store the lessons data.</p>
<p>From that moment, the plugin will be listening to your actions and documenting them according to the following ideas:</p>
<ul>
<li><p class="first">Whenever the focus changes to a new window, a screenshot of the window will be taken. An entry in the html file describing the current step will be added, which will include the screenshot.</p>
</li>
<li><p class="first">Whenever the focus changes between two elements (but both of them having the same parent window/dialog), and the one that receives the focus is an input widget (text box, dropdown list, etc), a screenshot of the new element that receives the focus will be taken. The element that receives the focus will be highlighted in the screenshot using a red dashed rectangle, as shown in the image below</p>
<blockquote>
<div><div class="figure">
<img alt="_images/rectangle.png" src="_images/rectangle.png" />
</div>
<p>The image will be added to the html corresponding to the current step, along with a text entry in the form &#8220;Click on [widget_name]&#8221;</p>
</div></blockquote>
</li>
<li><p class="first">When edit widgets lose focus or are modified, the plugin will try to capture the user action. For instance, for a dropdown list, when the current value is changed, the text &#8220;Select [new_value_text] in the [dropdown_name] dropdown list&#8221; is added. In the case of text boxes, the text &#8220;Enter [text] in the [textbox_name] textbox&#8221; is added.</p>
</li>
<li><p class="first">When a menu item is clicked, the text &#8220;Select the [menu_text] menu&#8221; will be added.</p>
</li>
</ul>
<p>All texts snippets and screenshots are added to the html file that describes the current step. A lesson might contain several steps. To start a new step and add text and screenshots to another file, press CTRL-W at anytime, and a new step will be started.</p>
<p>When you have captured all elements of you lesson, select the <em>Plugins/Lessons/Stop capturing lesson steps</em> menu.</p>
<p>In the folder that you selected, you will find all html files and image files. You will also find a <code class="docutils literal"><span class="pre">`___init.py___`</span></code> file that describe the lesson. The folder as it is generated can be added to your lessons plugin (created based on the <code class="docutils literal"><span class="pre">`examplelessons`</span></code> template) and will be recognised as a valid lesson.</p>
</div>
</div>


      <!-- Next/Prev -->
      <div class="selfclear pagination-nav">
          <div class="left"><strong>Previous</strong>: <a href="usage.html" title="previous chapter">Usage</a></div>
      </div>

  <!--
    &copy; Copyright 2016 Boundless Spatial, Inc.
  -->

  </div> <!-- rightbar_main -->

  <div id="rightbar_bar">
    
      <div id="toc" class="section">
        <h4 class="pngfix">Table Of Contents</h4>
        <ul>
<li><a class="reference internal" href="#">Writing Lessons</a><ul>
<li><a class="reference internal" href="#creating-a-lesson">Creating a lesson</a></li>
<li><a class="reference internal" href="#convenience-methods-and-utils">Convenience methods and utils</a></li>
<li><a class="reference internal" href="#creating-simple-lessons-with-yaml-files">Creating simple lessons with YAML files</a></li>
<li><a class="reference internal" href="#capturing-qgis-interaction-to-create-a-lesson">Capturing QGIS interaction to create a lesson</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <p style="margin-top:1em"><b>Previous:</b> <a href="usage.html" title="previous chapter">Usage</a></p>
          </ul>
        </div>
        <div class="section">
        <h4>This Page</h4>
        <ul class="this-page-menu">
          <li><a href="_sources/writing_lessons.txt">Show Source</a></li>
        </ul>
        </div>

   <h4>About Boundless</h4>
   <p>Boundless provides <a href="http://boundlessgeo.com/solutions/">commercial open source software</a> for internet mapping and geospatial application development. We are dedicated to the growth and support of open source software.</p>

    <h4>License</h4>
    <p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-Share Alike 3.0 United States License</a>.  Feel free to use this material, but we ask that you please retain the Boundless branding, logos and style.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/us/88x31.png" /></a></p>
<!--
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="genindex.html" title="General Index"
       accesskey="I">index</a></li>
  <li>
    <a href="usage.html" title="Usage"
       accesskey="P">previous</a>|</li>
</ul> -->
  </div> <!-- rightbar_bar -->

  </div> <!-- content -->
  <div id="footer">
    <footer id="colophon" class="site-footer" role="contentinfo">
		<div class="container">
		<!--
			<div class="row">
				<div class="span2">
					<h5>Solutions</h5>
					<div class="footer-solutions-menu">
						<ul id="menu-solutions" class="menu">
							<li><a href="http://boundlessgeo.com/solutions/">Overview</a></li>
							<li><a href="http://boundlessgeo.com/opengeo-suite/">OpenGeo Suite</a></li>
							<li><a href="http://boundlessgeo.com/mapmeter/">MapMeter</a></li>
							<li><a href="http://boundlessgeo.com/solutions/solutions-software/">By Software</a></li>
							<li><a href="http://boundlessgeo.com/solutions/solutions-industry/">By Industry</a></li>
						</ul>
					</div>
				</div>
				<div class="span2">
					<h5>Resources</h5>
					<div class="footer-resources-menu">
						<ul id="menu-resources" class="menu">
							<li><a href="http://boundlessgeo.com/resources/">Overview</a></li>
							<li><a href="http://boundlessgeo.com/resources/trainings/">Trainings</a></li>
							<li><a href="http://boundlessgeo.com/resources/workshops/">Workshops</a></li>
							<li><a href="http://boundlessgeo.com/documentation/">Documentation</a></li>
							<li><a href="http://boundlessgeo.com/case-studies/">Case Studies</a></li>
							<li><a href="http://boundlessgeo.com/resources/white-papers/">White Papers</a></li>
							<li><a href="http://boundlessgeo.com/resources/tours/">Tours</a></li>
						</ul>
					</div>
				</div>
				<div class="span2">
					<h5>About Us</h5>
					<div class="footer-about-menu">
						<ul id="menu-about-menu" class="menu">
							<li><a href="http://boundlessgeo.com/about/">Overview</a></li>
							<li><a href="http://boundlessgeo.com/resources/contact/">Contact</a></li>
							<li><a href="http://boundlessgeo.com/about/team/">Team</a></li>
							<li><a href="http://boundlessgeo.com/resources/careers/">Careers</a></li>
							<li><a href="http://boundlessgeo.com/resources/partners/">Partners</a></li>
							<li><a href="http://boundlessgeo.com/blog/">Blog</a></li>
							<li><a href="http://boundlessgeo.com/resources/news/">News &amp; Media</a></li>
</ul></div>				</div>

				<div class="span6 site-info">

					<div class="row-fluid">
						<div class="span6">
							<h5>Contact</h5>
							<p class="address">
								<span>155 Water Street, Suite 4-10</span>
								<span>Brooklyn, NY 11201</span>
								<span>1-877-OPENGEO</span>
								<span>ddubovsky@opengeo.org</span>
							</p>
						</div>
						<div class="span6">
							<span class="social"><i class="twitter"></i><a href="https://twitter.com/opengeo" target="_blank">Follow us on Twitter</a></span>
							<span class="social"><i class="linkedIn"></i><a href="http://www.linkedin.com/company/opengeo" target="_blank">Follow us on Linkedin</a></span>
							<span class="social"><i class="email"></i>Subscribe to our Newsletter</span>
							<div>
								<iframe seamless src="http://info.opengeo.org/email.html" sandbox="allow-forms" scrolling="no"></iframe>
   							</div>
						</div>
					</div>

				</div>
			</div>-->
			<div class="row">
				<div class="span12 footer-sub-menu">
					<div class="menu-footer-menu-container">
						<ul id="menu-footer-menu" class="menu">
							<li>
    <a href="http://boundlessgeo.com/">Copyright &copy; 2016 Boundless Spatial, Inc.</a>
							</li>
							<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-Share Alike 3.0 United States License</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer>
  </div><!-- footer -->

</div><!-- container -->

<!--<script type="text/javascript" src="_static/dropdown.js"></script>-->

  </body>
</html>